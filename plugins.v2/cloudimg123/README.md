# CloudImg123 - MoviePilot插件

一个功能完整的123云盘图床插件，支持图片上传和多格式链接生成。

## 写在前面
- 个人精力有限，代码已让AI补充详细备注，欢迎有兴趣的大佬二改。
## 注意
- 由于浏览器安全上下文缘故，复制按钮需要将页面反代后才可以使用。或者进入浏览器设置，启用--unsafely-treat-insecure-origin-as-secure并填入本地根域名可解决此问题。

## 功能特性

- 📸 **图片上传**: 支持拖拽上传和多文件批量上传
- 🔗 **多格式链接**: 自动生成URL、HTML、Markdown、BBCode四种标准格式
- 📊 **历史记录**: 完整的上传历史管理和统计分析
- 🎨 **美观界面**: 基于Vue3+Vuetify的现代化前端界面
- 🔄 **实时同步**: 前后端数据实时同步
- 🛡️ **自动续期**: Token自动管理，30天有效期，到期自动更新token
- 🖼️ **缩略图预览**: 支持图片缩略图生成和缓存
- 📱 **响应式设计**: 适配不同屏幕尺寸
- 📋 **上传管理**: 为多图片上传增设任务列表处理框
- 🔍 **搜索过滤**: 支持历史记录搜索和分页
- 🚀 **分页优化**: 优化分页懒加载加载，提升体验

## 界面展示

### 上传界面
- 支持选择和拖拽上传
- 显示上传进度

### 历史记录界面
- 图片预览
- 搜索和过滤
- 分页显示
- 一键复制链接

## 安装配置

1. **获取API凭证**
   - 访问[123云盘开放平台](https://www.123pan.com/developers)
   - 注册开发者账号
   - 创建应用获取Client ID和Client Secret

2. **插件配置**
   - 启用插件
   - 填入Client ID和Client Secret
   - 设置历史记录保存数量（可调）
   - 开启调试模式

3. **开始使用**
   - 点击插件详情页进入上传界面
   - 拖拽或点击上传图片
   - 复制生成的链接使用

## 技术架构

### 后端组件
- **CloudImg123**: 主插件类，负责配置管理和API暴露
- **APIClient**: API客户端，处理与123云盘的交互
- **TokenManager**: Token管理器，处理30天有效期和自动刷新
- **UploadManager**: 上传管理器，处理文件上传和格式生成
- **HistoryManager**: 历史管理器，处理记录存储和统计
- **ThumbnailManager**: 缩略图管理器，负责图片缩略图的生成和缓存

### 前端组件
- **Page与Config**：已集成至dist文件夹

### 数据存储
```
/config/plugins/cloudimg123/
├── token_data.json     # Token数据
├── history.json        # 历史记录
└── cache/              # 缓存目录
    └── thumbnails/     # 缩略图缓存

```

## 更新日志

### v1.3.0
- 修复因懒加载导致的无法预览问题
- 增加上传取消
- 增加移动端展示适配
- 修复删除后端处理逻辑

### v1.1.0
- 完善的缩略图生成和缓存
- 优雅的上传任务列表模态框
- 改进历史记录搜索和分页
- 优化懒加载和事件处理
- 修复缩略图显示和分页问题

### v1.0.0
- 基础图片上传功能
- 多格式链接生成
- 历史记录管理
- Vue3前端界面
- Token自动管理
- 统计功能

## 许可证

MIT License

## 贡献


欢迎提交Issue和Pull Request来改进这个插件。


